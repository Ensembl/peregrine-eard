program "group" "program" 1;

world code wc(?X) -> ?X { impl(r1: ?X) -> r2: ?X { opcode 21, r2 ,r1; } }
function c(x) { let y = wc(x); y }

print(format(c("hello, world!")));
print(format(c([1,2,3])));
print(format(c(["hi",...])));

let a = c(1);
let b = c(true);
let c = c("hello");

let x = c([a,2,3]);
let y = c([b,false]);
let z = c([c,"world"]);

print(format(x));
print(format(y));
print(format(z));

let x = c([a,2,3]);
let y = c([b,false]);
let z = c([c,"world"]);

print(format(x));
print(format(y));
print(format(z));
print(format([c(6),...]));
print(format([c(true),...]));
print(format([c("boo"),...]));

print(format(max(-1,2)));
print(format(min(-1,2)));

let a = c(2);
let b = c(3);

print(format(max(a,b)));
print(format(max(a,b)));

let a = c(2);
let b = c(3);

print(format(min(a,b)));
print(format(min(a,b)));

print(format(max([1,2,3],[2,1,5])));
print(format(min([1,2,3],[2,1,5])));
print(format(max([1,2,3],2)));
print(format(min([1,2,3],2)));
print(format(max([1,2,3],[2,...])));
print(format(min([1,2,3],[2,...])));

let a = c([1,2,3]);
let b = c([2,1,5]);
let c = c(2);
let d = c([2,...]);

print(format(max(a,b)));
print(format(min(a,b)));
print(format(max(a,c)));
print(format(min(a,c)));
print(format(max(a,d)));
print(format(min(a,d)));
c(a);
print(format(max(c(a),c(b))));
print(format(min(c(a),c(b))));
print(format(max(c(a),c(c))));
print(format(min(c(a),c(c))));
print(format(max(c(a),c(d))));
print(format(min(c(a),c(d))));

call_up();

let a : length(!x) = [1,2,3];
let b : length(!x) = [4,5,6];

print(format(c(2)+c(3)));
print(format(c([1,2])+c(3)));
print(format(c([1,2])+c([3,4])));
print(format(c([1,2])+c([5.2,...])));

print(format(c(2)-c(3)));
print(format(c([1,2])-c(3)));
print(format(c([1,2])-c([3,4])));
print(format(c([1,2])-c([5.2,...])));
