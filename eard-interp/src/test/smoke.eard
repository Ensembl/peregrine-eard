program "group" "program" 1;

world code wc(?X) -> ?X { impl(r1: ?X) -> r2: ?X { opcode 21, r2 ,r1; } }
function c(x) { let y = wc(x); y }

print(format(c("hello, world!")));
print(format(c([1,2,3])));
print(format(c(["hi",...])));

let a = c(1);
let b = c(true);
let c = c("hello");

let x = c([a,2,3]);
let y = c([b,false]);
let z = c([c,"world"]);

print(format(x));
print(format(y));
print(format(z));

let x = c([a,2,3]);
let y = c([b,false]);
let z = c([c,"world"]);

print(format(x));
print(format(y));
print(format(z));
print(format([c(6),...]));
print(format([c(true),...]));
print(format([c("boo"),...]));

print(format(max(-1,2)));
print(format(min(-1,2)));

let a = c(2);
let b = c(3);

print(format(max(a,b)));
print(format(max(a,b)));

let a = c(2);
let b = c(3);

print(format(min(a,b)));
print(format(min(a,b)));

print(format(max([1,2,3],[2,1,5])));
print(format(min([1,2,3],[2,1,5])));
print(format(max([1,2,3],2)));
print(format(min([1,2,3],2)));
print(format(max([1,2,3],[2,...])));
print(format(min([1,2,3],[2,...])));

let a = c([1,2,3]);
let b = c([2,1,5]);
let c = c(2);
let d = c([2,...]);

print(format(max(a,b)));
print(format(min(a,b)));
print(format(max(a,c)));
print(format(min(a,c)));
print(format(max(a,d)));
print(format(min(a,d)));
c(a);
print(format(max(c(a),c(b))));
print(format(min(c(a),c(b))));
print(format(max(c(a),c(c))));
print(format(min(c(a),c(c))));
print(format(max(c(a),c(d))));
print(format(min(c(a),c(d))));

call_up();

let a : length(!x) = [1,2,3];
let b : length(!x) = [4,5,6];

print(format(c(2)+c(3)));
print(format(c([1,2])+c(3)));
print(format(c([1,2])+c([3,4])));
print(format(c([1,2])+c([5.2,...])));

print(format(c(2)-c(3)));
print(format(c([1,2])-c(3)));
print(format(c([1,2])-c([3,4])));
print(format(c([1,2])-c([5.2,...])));

print(format(c(2)*c(3)));
print(format(c([1,2])*c(3)));
print(format(c([1,2])*c([3,4])));
print(format(c([1,2])*c([5.2,...])));

print(format(c(19)/c(2)));
print(format(c([1,2])/c(2)));
print(format(c([1,2])/c([2,4])));
print(format(c([1,2])/c([0.25,...])));

print(format(c(19)%c(2)));
print(format(c([1,2])%c(2)));
print(format(c([1,5])%c([2,3])));
print(format(c([3,10])%c([3,...])));

let a = c(3);
print(format(a>2));
print(format(a>3));
print(format(a>4));
print(format(a>=2));
print(format(a>=3));
print(format(a>=4));

let a = c([1,2,3,4]);
print(format(a>2));
print(format(a>3));
print(format(a>4));
print(format(a>=2));
print(format(a>=3));
print(format(a>=4));

let a = c([1,2,3,4]);
let b = c([4,3,3,1]);
print(format(a>b));
print(format(a>=b));

print(format(c(3)==3));
print(format(c(3)==4));
print(format(c([3,4])==3));
print(format(c([3,4,3,4])==[3,3,4,4]));

print(format(c(false)==false));
print(format(c(false)==true));
print(format(c([false,true])==false));
print(format(c([false,true,false,true])==[false,false,true,true]));

print(format(c("3")=="3"));
print(format(c("3")=="4"));
print(format(c(["3","4"])=="3"));
print(format(c(["3","4","3","4"])==["3","3","4","4"]));

let f = c(false);
let t = c(true);

print(format(t&&f));
print(format(t&&t));
print(format([f,t]&&t));
print(format([f,t,f,t]&&[f,f,t,t]));

print(format(f||f));
print(format(f||t));
print(format([f,t]||f));
print(format([f,t,f,t]||[f,f,t,t]));

let a = c(6);
let b = c([-2,-1,1,2]);

print(format(-a));
print(format(-b));

let f = c(false);
let t = c(!f);

print(format(!f));
print(format(![t,f,!t,!f]));

print(format(repeat(true,5)));
print(format(repeat("hi",0)));
print(format(repeat(3,10)));

let a = c([1,2,3,4,5]);
let b = c([6,7,8,9,0]);

print(format(if(c(false),a,b)));
print(format(if(c(true),a,b)));
print(format(if(c([true,true,false,true,false]),a,b)));
